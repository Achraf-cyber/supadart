## Supabase Schema to Dart Classes

Generate Dart classes from your Supabase schema.
[Web App](https://www.json2dart.com/)

## Usage

### 1. Assuming the following table schema

```sql
create table
  public.books (
    id bigint generated by default as identity,
    book_name text not null,
    created_at timestamp with time zone not null default now(),
    book_description text null,
    sold boolean not null default false,
    price double precision not null,
    constraint books_pkey primary key (id),
    constraint books_id_key unique (id)
  ) tablespace pg_default;
```

### 2. Go to the [website](https://www.json2dart.com/) and input your `SUPABASE_URL` and `SUPABASE_ANON_KEY` to generate the model class.

```dart
class Books {
  int id;
  String book_name;
  String created_at;
  String? book_description;
  bool sold;
  int price;

  Books({
    required this.id,
    required this.book_name,
    required this.created_at,
    this.book_description,
    required this.sold,
    required this.price,
  });

  static String get table_name => 'books';
  static Map<String, dynamic> insert({
    int? id,
    required String book_name,
    String? created_at,
    String? book_description,
    bool? sold,
    required int price,
  }) {
    return {
      if (id != null) 'id': id,
      'book_name': book_name,
      if (created_at != null) 'created_at': created_at,
      if (book_description != null) 'book_description': book_description,
      if (sold != null) 'sold': sold,
      'price': price,
    };
  }

  static Map<String, dynamic> update({
    int? id,
    String? book_name,
    String? created_at,
    String? book_description,
    bool? sold,
    int? price,
  }) {
    return {
      if (id != null) 'id': id,
      if (book_name != null) 'book_name': book_name,
      if (created_at != null) 'created_at': created_at,
      if (book_description != null) 'book_description': book_description,
      if (sold != null) 'sold': sold,
      if (price != null) 'price': price,
    };
  }
}
```

### 3. Using the generated class

we now have a typesafe'ish to interact with the database.

#### Getting Table Name

```dart
  Books.table_name // "books"
  await supabase.from(Books.table_name).select().execute();
```

### Inserting Data

```dart
  final data = Books.insert(
    book_name: 'Book Name',
    book_description: 'Description',
    price: 2,
  );
  await supabase.from(Books.table_name).insert(data).execute();
```

### Inserting Many

```dart
  final many_data = [
    Books.insert(
      book_name: 'Book Name',
      book_description: 'Description',
      price: 2,
    ),
    Books.insert(
      book_name: 'Book Name 2',
      created_at: DateTime.now().toString(),
      price: 2,
    ),
  ];
  await supabase.from(Books.table_name).insert(many_data).execute();

```

### Updating Data

```dart
  final newData = Books.update(
    book_name: 'New Book Name',
    // we can update any field we want
  );
  await supabase
      .from(Books.table_name)
      .update(newData)
      .eq('id', 1)
      .execute();

```

### Deleting Data

```dart
  await supabase.from(Books.table_name).delete().eq('id', 1).execute();
```

---

## Note

There are still things to do, the converter is not perfect, but it's a start.

I am not quite confident with the tool especially the generation of data types, so please if you find any issue in the `SupabaseDartClassGenerator.ts` file, feel free to open an issue or a PR.
